1. Systme Core -> IWDG -> Activated.
2. LED4 -> Output Push Pull.
3. IWDG -> Parameter Settings -> IWDG counter clock prescaler: 4, IWDG down-counter reload value: 50.
4. Интервал обновления IWDG рассчитывается по формуле: (1 / Flsi) * IWDG_prescaler * IWDG_counterval. Для текущего случая: tiwdg = (1 / (32 * 10^3) * 4 * 50 = 6,25 мс.
5. Из Reference Manual: Служит для обнаружения и устранения неисправностей из-за сбоя программного обеспечения, а также для запуска сброса системы. IWDG синхронизируется собственными выделенными низкоскоростными тактовым генератором (LSI) и, таким образом, остается активным даже при выходе из строя основных клоков. IWDG лучше всего подходит для приложений, которые требуют, чтобы сторожевой таймер работал как полностью независимый процесс вне основного приложения, но имеет более низкие ограничения точности синхронизации. Когда независимый сторожевой таймер запускается путем записи значения 0xCCCC в ключевой регистр (IWDG_KR), счетчик начинает обратный отсчет от значения сброса 0xFFF. Когда он достигает значения конца счета (0x000), генерируется сигнал сброса (сброс IWDG). Всякий раз, когда значение ключа 0xAAAA записывается в регистр IWDG_KR (функция HAL_IWDG_Refresh()), значение IWDG_RLR перезагружается в счетчик, и сброс сторожевого таймера предотвращается.
6. Уменьшая задержку в HAL_Delay() меньше рассчитанного времени (6,25 мс) мк успевает предотвратить собственный сброс. 