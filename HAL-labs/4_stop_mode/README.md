1. Соотношение команд входа в режим STOP и настроенного пина EXTI для выхода из режима:
WFI - выход и по INT и по EVENT
WFE - выход и по INT и по EVENT
2. Различия функций HAL_PWR_EnterSTOPMode() и HAL_PWR_EnterSLEEPMode() состоит в том, что в первой происходит управление питанием через регистер PWR_CR. В обеих происходит запись в регистр SCR блока управления системой SCB.
3. В режиме STOP ядро остановлено, генераторы HSE (MSI - внутренний RC генератор с возможностью выбора частоты генерации) выключены, SRAM и регистры сохраняют свое содержимое, периферия с HSI, LSI, LSE генераторами может быть включена, GPIO сохраняют свои настройки.
4. Алгоритм следующий (учитывая настройки EXTI):
Инициализация NVIC -> инициализация GPIO -> вход в режим по WFI/WFE путем вызова функции HAL_PWR_EnterSTOPMode() -> ожидания триггера на GPIO -> вызов прерывания (события) -> процедура обработки INT с вызовом Callback -> перенастройка клоков после пробуждения через SystemClock_Config().
